<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <link rel="apple-touch-icon" sizes="180x180" href="favicon_io-GN/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon_io-GN/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon_io-GN/favicon-16x16.png">
    <link rel="manifest" href="favicon_io-GN/site.webmanifest">
  <title>Prescription Medicines - Goodneewz</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="../../Footer/footer.css">
  <style>
    body { font-family: 'Inter', sans-serif; }
    .line-clamp-2 { overflow: hidden; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; }

    /* Price Slider Styling */
    .slider-wrapper {
      position: relative;
      height: 6px;
      /* background: #e7f7fc; */
      border-radius: 4px;
      margin: 40px 10px 30px;
    }

    .slider-fill {
      position: absolute;
      height: 100%;
      background: #703B3B;
      border-radius: 2px;
      top: 0;
    }

    input[type="range"] {
      -webkit-appearance: none;
      appearance: none;
      width: 100%;
      background: transparent;
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      margin: 0;
      pointer-events: none;
    }

    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      height: 24px;
      width: 24px;
      border-radius: 50%;
      background: #715A5A;
      border: 4px solid white;
      cursor: pointer;
      pointer-events: all;
      box-shadow: 0 4px 12px rgba(190, 190, 190, 0.4);
    }

    input[type="range"]::-moz-range-thumb {
      height: 24px;
      width: 24px;
      border-radius: 50%;
      background: #715A5A;
      border: 4px solid white;
      cursor: pointer;
      pointer-events: all;
      box-shadow: 0 4px 12px rgba(236, 211, 72, 0.4);
    }

    .price-values {
      display: flex;
      justify-content: space-between;
      font-weight: 600;
      color: #C2A68C;
      font-size: 14px;
      padding: 0 10px;
    }

    @media (max-width: 1023px) {
      body { padding-bottom: 90px !important; }
    }
  </style>
</head>
<body class="bg-[#F3F2EC] ">

  <div id="header-placeholder"></div>
  
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 mt-28">
    <!-- Banner Section -->
    <section class="mt-8 relative w-full h-[300px] sm:h-[350px] mb-6 overflow-hidden rounded-xl shadow-lg bg-gradient-to-r from-blue-100 to-pink-100">
      <div class="relative z-10 flex flex-col items-center justify-center h-full text-center px-4">
        <h2 class="text-3xl font-bold text-gray-800">Prescription Medicines</h2>
        <p class="mt-2 text-gray-600">Upload your prescription for safe medication</p>
      </div>
    </section>
  </div>

  <div class="flex flex-col lg:flex-row gap-8 mt-1 max-w-7xl mx-auto px-4 ">
    <!-- Desktop Sidebar Filters -->
    <aside id="filterSidebar" class="hidden lg:block lg:w-70 bg-[#DCDCDC] rounded-lg shadow-xl border-pink-500 p-6">
      <form id="desktopFilterForm" class="space-y-6">
        <!-- Categories -->
        <div class="border-b border-pink-100 pb-7">
          <div class="flex items-center justify-between cursor-pointer select-none"
               >
            <h3 class="text-sm font-bold text-gray-800 uppercase tracking-wider">Categories</h3>
            <!-- <i class="fas fa-chevron-down text-gray-500 transition-transform duration-200"></i> -->
          </div>
          <div class="mt-3 space-y-3">
            <label class="flex items-center text-sm cursor-pointer">
              <input type="radio" name="desktopCategory" value="all" class="w-4 h-4 text-pink-600 rounded border-gray-300" checked>
              <span class="ml-3 text-gray-700">All categories</span>
            </label>
            <label class="flex items-center text-sm cursor-pointer">
              <input type="radio" name="desktopCategory" value="Allergy and Fever" class="w-4 h-4 text-pink-600 rounded border-gray-300">
              <span class="ml-3 text-gray-700">Allergy and Fever</span>
            </label>
            <label class="flex items-center text-sm cursor-pointer">
              <input type="radio" name="desktopCategory" value="Antibiotics" class="w-4 h-4 text-pink-600 rounded border-gray-300">
              <span class="ml-3 text-gray-700">Antibiotics</span>
            </label>
            <label class="flex items-center text-sm cursor-pointer">
              <input type="radio" name="desktopCategory" value="Liver & Kidney Care" class="w-4 h-4 text-pink-600 rounded border-gray-300">
              <span class="ml-3 text-gray-700">Liver & Kidney Care</span>
            </label>
            <label class="flex items-center text-sm cursor-pointer">
              <input type="radio" name="desktopCategory" value="Stomach Care & Digestion" class="w-4 h-4 text-pink-600 rounded border-gray-300">
              <span class="ml-3 text-gray-700">Stomach Care & Digestion</span>
            </label>
            <label class="flex items-center text-sm cursor-pointer">
              <input type="radio" name="desktopCategory" value="Skin Medicines" class="w-4 h-4 text-pink-600 rounded border-gray-300">
              <span class="ml-3 text-gray-700">Skin Medicines</span>
            </label>
          </div>
        </div>

        <!-- Price Range Slider -->
        <div class="price-slider-container">
          <h4 class="text-sm font-bold text-gray-800 uppercase tracking-wider mb-2">Price Range</h4>
          <div class="slider-wrapper">
            <div class="slider-fill" id="desktopFill"></div>
            <input type="range" min="0" max="10000" value="0" id="desktopMin">
            <input type="range" min="0" max="10000" value="10000" id="desktopMax">
          </div>
          <div class="price-values">
            <span id="desktopMinVal">₹0</span>
            <span id="desktopMaxVal">₹10,000</span>
          </div>
        </div>

        <!-- Brands -->
        <div class="border-b border-gray-200 pb-5">
          <div class="flex items-center justify-between cursor-pointer select-none"
               onclick="this.nextElementSibling.classList.toggle('hidden'); this.querySelector('i').classList.toggle('rotate-180')">
            <h3 class="text-sm font-bold text-gray-800 uppercase tracking-wider">Brands</h3>
            <i class="fas fa-chevron-down text-gray-500 transition-transform duration-200"></i>
          </div>
          <div class="mt-3 space-y-3">
            <label class="flex items-center text-sm cursor-pointer">
              <input type="radio" name="desktopBrand" value="all" class="w-4 h-4 text-pink-600 rounded" checked>
              <span class="ml-3 text-gray-700">All Brands</span>
            </label>
            <label class="flex items-center text-sm cursor-pointer">
              <input type="radio" name="desktopBrand" value="Biofield Pharma" class="w-4 h-4 text-pink-600 rounded">
              <span class="ml-3 text-gray-700">Biofield Pharma</span>
            </label>
            <label class="flex items-center text-sm cursor-pointer">
              <input type="radio" name="desktopBrand" value="Abbott" class="w-4 h-4 text-pink-600 rounded">
              <span class="ml-3 text-gray-700">Abbott</span>
            </label>
            <label class="flex items-center text-sm cursor-pointer">
              <input type="radio" name="desktopBrand" value="Evapride" class="w-4 h-4 text-pink-600 rounded">
              <span class="ml-3 text-gray-700">Evapride</span>
            </label>
            <label class="flex items-center text-sm cursor-pointer">
              <input type="radio" name="desktopBrand" value="FDC Limited" class="w-4 h-4 text-pink-600 rounded">
              <span class="ml-3 text-gray-700">FDC Limited</span>
            </label>
          </div>
        </div>

        <!-- Discount -->
        <div class="border-b border-gray-200 pb-5">
          <div class="flex items-center justify-between cursor-pointer select-none"
               onclick="this.nextElementSibling.classList.toggle('hidden'); this.querySelector('i').classList.toggle('rotate-180')">
            <h3 class="text-sm font-bold text-gray-800 uppercase tracking-wider">Discount</h3>
            <i class="fas fa-chevron-down text-gray-500 transition-transform duration-200"></i>
          </div>
          <div class="mt-5 space-y-3">
            <label class="flex items-center text-sm cursor-pointer">
              <input type="radio" name="desktopDiscount" value="all" class="w-4 h-4 text-pink-600 rounded" checked>
              <span class="ml-3 text-gray-700">All Products</span>
            </label>
            <label class="flex items-center text-sm cursor-pointer">
              <input type="radio" name="desktopDiscount" value="10" class="w-4 h-4 text-pink-600 rounded">
              <span class="ml-3 text-gray-700">10% or more</span>
            </label>
            <label class="flex items-center text-sm cursor-pointer">
              <input type="radio" name="desktopDiscount" value="15" class="w-4 h-4 text-pink-600 rounded">
              <span class="ml-3 text-gray-700">15% or more</span>
            </label>
            <label class="flex items-center text-sm cursor-pointer">
              <input type="radio" name="desktopDiscount" value="20" class="w-4 h-4 text-pink-600 rounded">
              <span class="ml-3 text-gray-700">20% or more</span>
            </label>
          </div>
        </div>

        <button type="submit" class="w-full bg-[#C2A68C] hover:bg-[#C1856D] text-white font-semibold py-3.5 rounded-md transition">
          Apply Filters
        </button>
      </form>
    </aside>

    <!-- Main Products Area -->
    <main class="flex-1">
      <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 gap-4">
        <div>
          <h2 id="categoryTitle" class="text-2xl font-bold text-gray-900">All Products</h2>
          <p id="resultsCount" class="text-gray-600 mt-1">Showing all products</p>
        </div>
        <select id="sortSelect" class="hidden sm:block border border-gray-300 rounded-lg px-5 py-3 text-sm focus:ring-2 focus:ring-pink-500 focus:outline-none cursor-pointer">
          <option value="default">Sort by: Featured</option>
          <option value="price-low">Price: Low to High</option>
          <option value="price-high">Price: High to Low</option>
          <option value="rating">Customer Rating</option>
          <option value="newest">Newest First</option>
        </select>
      </div>

      <div id="productsGrid" class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-8">
        <!-- Products loaded via JS -->
      </div>
    </main>
  </div>

  <!-- Mobile Bottom Bar -->
  <div class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-4 py-3 flex gap-3 z-50 lg:hidden shadow-2xl">
    <button id="openSortSheet" class="flex-1 bg-blue-400 hover:bg-blue-500 text-white font-bold py-3.5 rounded-lg transition">
      Sort
    </button>
    <button id="openFilterSheet" class="flex-1 bg-blue-400 hover:bg-blue-500 text-white font-bold py-3.5 rounded-lg transition">
      Filters
    </button>
  </div>

  <!-- Mobile Filter Sheet -->
  <div id="filterSheet" class="fixed inset-x-0 bottom-0 bg-white rounded-t-3xl shadow-2xl max-h-[90vh] overflow-y-auto z-50 transform translate-y-full transition-transform duration-300">
    <div class="sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center z-10">
      <h3 class="text-lg font-bold">Filters</h3>
      <button id="closeFilterSheet" class="text-2xl">&times;</button>
    </div>

    <div class="p-6 space-y-8">
      <!-- CATEGORIES (Mobile) -->
      <div class="border-b border-gray-200 pb-6">
        <div class="flex items-center justify-between cursor-pointer" onclick="this.nextElementSibling.classList.toggle('hidden'); this.querySelector('i').classList.toggle('rotate-180')">
          <h4 class="font-bold text-gray-800">Categories</h4>
          <i class="fas fa-chevron-down text-gray-500 transition-transform duration-200"></i>
        </div>
        <div class="mt-4 space-y-3">
          <label class="flex items-center text-sm">
            <input type="radio" name="mobileCategory" value="all" checked class="w-4 h-4 text-pink-600">
            <span class="ml-3">All categories</span>
          </label>
          <label class="flex items-center text-sm">
            <input type="radio" name="mobileCategory" value="Allergy and Fever" class="w-4 h-4 text-pink-600">
            <span class="ml-3">Allergy and Fever</span>
          </label>
          <label class="flex items-center text-sm">
            <input type="radio" name="mobileCategory" value="Antibiotics" class="w-4 h-4 text-pink-600">
            <span class="ml-3">Antibiotics</span>
          </label>
          <label class="flex items-center text-sm">
            <input type="radio" name="mobileCategory" value="Liver & Kidney Care" class="w-4 h-4 text-pink-600">
            <span class="ml-3">Liver & Kidney Care</span>
          </label>
          <label class="flex items-center text-sm">
            <input type="radio" name="mobileCategory" value="Stomach Care & Digestion" class="w-4 h-4 text-pink-600">
            <span class="ml-3">Stomach Care & Digestion</span>
          </label>
          <label class="flex items-center text-sm">
            <input type="radio" name="mobileCategory" value="Skin Medicines" class="w-4 h-4 text-pink-600">
            <span class="ml-3">Skin Medicines</span>
          </label>
        </div>
      </div>

      <!-- PRICE RANGE (Mobile) -->
      <div class="price-slider-container">
        <h4 class="font-semibold mb-4">Price Range</h4>
        <div class="slider-wrapper">
          <div class="slider-fill" id="mobileFill"></div>
          <input type="range" min="0" max="10000" value="0" id="mobileMin">
          <input type="range" min="0" max="10000" value="10000" id="mobileMax">
        </div>
        <div class="price-values">
          <span id="mobileMinVal">₹0</span>
          <span id="mobileMaxVal">₹10,000</span>
        </div>
      </div>

      <!-- BRANDS (Mobile) -->
      <div class="border-b border-gray-200 pb-6">
        <div class="flex items-center justify-between cursor-pointer" onclick="this.nextElementSibling.classList.toggle('hidden'); this.querySelector('i').classList.toggle('rotate-180')">
          <h4 class="font-bold text-gray-800">Brands</h4>
          <i class="fas fa-chevron-down text-gray-500 transition-transform duration-200"></i>
        </div>
        <div class="mt-4 space-y-3">
          <label class="flex items-center text-sm">
            <input type="radio" name="mobileBrand" value="all" checked class="w-4 h-4 text-pink-600">
            <span class="ml-3">All Brands</span>
          </label>
          <label class="flex items-center text-sm">
            <input type="radio" name="mobileBrand" value="Biofield Pharma" class="w-4 h-4 text-pink-600">
            <span class="ml-3">Biofield Pharma</span>
          </label>
          <label class="flex items-center text-sm">
            <input type="radio" name="mobileBrand" value="Abbott" class="w-4 h-4 text-pink-600">
            <span class="ml-3">Abbott</span>
          </label>
          <label class="flex items-center text-sm">
            <input type="radio" name="mobileBrand" value="Evapride" class="w-4 h-4 text-pink-600">
            <span class="ml-3">Evapride</span>
          </label>
          <label class="flex items-center text-sm">
            <input type="radio" name="mobileBrand" value="FDC Limited" class="w-4 h-4 text-pink-600">
            <span class="ml-3">FDC Limited</span>
          </label>
        </div>
      </div>

      <!-- DISCOUNT (Mobile) -->
      <div class="border-b border-gray-200 pb-6">
        <div class="flex items-center justify-between cursor-pointer" onclick="this.nextElementSibling.classList.toggle('hidden'); this.querySelector('i').classList.toggle('rotate-180')">
          <h4 class="font-bold text-gray-800">Discount</h4>
          <i class="fas fa-chevron-down text-gray-500 transition-transform duration-200"></i>
        </div>
        <div class="mt-4 space-y-3">
          <label class="flex items-center text-sm">
            <input type="radio" name="mobileDiscount" value="all" checked class="w-4 h-4 text-pink-600">
            <span class="ml-3">All Products</span>
          </label>
          <label class="flex items-center text-sm">
            <input type="radio" name="mobileDiscount" value="10" class="w-4 h-4 text-pink-600">
            <span class="ml-3">10% or more</span>
          </label>
          <label class="flex items-center text-sm">
            <input type="radio" name="mobileDiscount" value="15" class="w-4 h-4 text-pink-600">
            <span class="ml-3">15% or more</span>
          </label>
          <label class="flex items-center text-sm">
            <input type="radio" name="mobileDiscount" value="20" class="w-4 h-4 text-pink-600">
            <span class="ml-3">20% or more</span>
          </label>
        </div>
      </div>

      <!-- Apply & Clear Buttons -->
      <div class="flex gap-3 pt-6 border-t">
        <button id="clearMobileFilters" class="flex-1 border border-pink-600 text-pink-600 py-3 rounded-lg font-bold">Clear All</button>
        <button id="applyMobileFilters" class="flex-1 bg-pink-600 text-white py-3 rounded-lg font-bold">Apply Filters</button>
      </div>
    </div>
  </div>

  <!-- Backdrop -->
  <div id="mobileSheetBackdrop" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden lg:hidden"></div>

  <!-- Mobile Sort Sheet -->
  <div id="sortSheet" class="fixed inset-x-0 bottom-0 bg-white rounded-t-3xl shadow-2xl max-h-[90vh] overflow-y-auto z-50 transform translate-y-full transition-transform duration-300">
    <div class="sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center">
      <h3 class="text-lg font-bold">Sort By</h3>
      <button id="closeSortSheet" class="text-2xl">&times;</button>
    </div>
    <div class="p-6 space-y-4">
      <label class="flex items-center p-3 hover:bg-gray-50 rounded-lg cursor-pointer">
        <input type="radio" name="mobileSort" value="default" checked class="w-5 h-5 text-pink-600">
        <span class="ml-4 font-medium">Featured</span>
      </label>
      <label class="flex items-center p-3 hover:bg-gray-50 rounded-lg cursor-pointer">
        <input type="radio" name="mobileSort" value="price-low" class="w-5 h-5 text-pink-600">
        <span class="ml-4 font-medium">Price: Low to High</span>
      </label>
      <label class="flex items-center p-3 hover:bg-gray-50 rounded-lg cursor-pointer">
        <input type="radio" name="mobileSort" value="price-high" class="w-5 h-5 text-pink-600">
        <span class="ml-4 font-medium">Price: High to Low</span>
      </label>
      <label class="flex items-center p-3 hover:bg-gray-50 rounded-lg cursor-pointer">
        <input type="radio" name="mobileSort" value="rating" class="w-5 h-5 text-pink-600">
        <span class="ml-4 font-medium">Customer Rating</span>
      </label>
      <label class="flex items-center p-3 hover:bg-gray-50 rounded-lg cursor-pointer">
        <input type="radio" name="mobileSort" value="newest" class="w-5 h-5 text-pink-600">
        <span class="ml-4 font-medium">Newest First</span>
      </label>
    </div>
    <div class="p-4 border-t bg-white sticky bottom-0">
      <button id="applySortBtn" class="w-full bg-pink-600 hover:bg-pink-700 text-white font-bold py-3.5 rounded-lg">
        Apply Sort
      </button>
    </div>
  </div>

  <!-- Upload Prescription Modal -->
  <div id="uploadModal" class="hidden fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-2">
    <div class="bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
      <div class="p-6 md:p-8">
        <button onclick="document.getElementById('uploadModal').classList.add('hidden')" class="float-right text-2xl">&times;</button>
        <div class="grid md:grid-cols-2 gap-8">
          <div>
            <h2 class="text-2xl font-bold mb-4">Upload Prescription</h2>
            <p class="font-semibold text-pink-600 mb-4" id="modalProductName"></p>
            <label class="block border-2 border-dashed border-pink-300 rounded-xl p-6 text-center cursor-pointer hover:border-pink-500 transition">
              <input type="file" id="prescriptionFile" accept="image/*,.pdf" class="hidden">
              <svg class="w-12 h-12 mx-auto text-pink-500 mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3v-11"/>
              </svg>
              <p class="font-medium">Click to upload prescription</p>
              <p class="text-sm text-gray-500 mt-2">Supports JPG, PNG, PDF</p>
            </label>
            <img id="prescriptionPreviewImg" class="hidden w-full mt-4 rounded-lg border" alt="Preview">
            <button id="submitPrescription" class="mt-6 w-full bg-pink-600 hover:bg-pink-700 text-white font-bold py-3 rounded-lg transition">
              Submit Prescription
            </button>
          </div>
          <div class="bg-gray-50 rounded-xl p-6">
            <h3 class="font-bold text-lg mb-4">How it works?</h3>
            <ol class="space-y-4 text-gray-700">
              <li>✓ Pharmacist verifies your prescription</li>
              <li>✓ Items added to cart automatically</li>
              <li>✓ Get maximum discount applied</li>
              <li>✓ Choose fastest delivery slot</li>
              <li>✓ Complete payment securely</li>
            </ol>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- footer placeholder -->
   <div id="footer-placeholder"></div>

   <script>
    function loadHeader() {
        fetch('../../Header/header.html')
            .then(r => { if (!r.ok) throw r; return r.text(); })
            .then(html => {
                document.getElementById('header-placeholder').innerHTML = html;
                const script = document.createElement('script');
                script.src = '../../Header/header.js';
                script.onload = () => console.log('Header JS loaded');
                document.body.appendChild(script);
            })
            .catch(err => console.error('Header load failed:', err));
    }

    function loadFooter() {
        fetch('../../Footer/footer.html')
            .then(r => { if (!r.ok) throw r; return r.text(); })
            .then(html => {
                document.getElementById('footer-placeholder').innerHTML = html;
            })
            .catch(err => console.error('Footer load failed:', err));
    }

    document.addEventListener('DOMContentLoaded', () => {
        loadHeader();
        loadFooter();
        // ... rest of your code
    });
</script>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const products = [
        {
          "id": 1,
          "name": "Isoxsuprine Hydrochloride SR 40mg",
          "price": 85,
          "originalPrice": 100,
          "discount": "15% off",
          "category": "Women's Health",
          "brand": "Biofield Pharma",
          "image": "https://via.placeholder.com/300x200.png?text=Isoxsuprine+40mg",
          "prescriptionRequired": true,
          "rating": 4.5
        },
        {
          "id": 2,
          "name": "Letrozole Tablet",
          "price": 150,
          "originalPrice": 180,
          "discount": "17% off",
          "category": "Women's Health",
          "brand": "Evapride",
          "image": "https://via.placeholder.com/300x200.png?text=Letrozole+Tablet",
          "prescriptionRequired": true,
          "rating": 4.2
        },
        {
          "id": 3,
          "name": "Doxylamine Succinate Combo",
          "price": 95,
          "originalPrice": 120,
          "discount": "21% off",
          "category": "Women's Health",
          "brand": "Ultrableess Remedies",
          "image": "https://via.placeholder.com/300x200.png?text=Doxylamine+Combo",
          "prescriptionRequired": true,
          "rating": 4.0
        },
        {
          "id": 4,
          "name": "Cefixime Tab 200mg",
          "price": 120,
          "originalPrice": 150,
          "discount": "20% off",
          "category": "Antibiotics",
          "brand": "Abbott Healthcare Pvt Ltd",
          "image": "https://via.placeholder.com/300x200.png?text=Cefixime+200mg",
          "prescriptionRequired": true,
          "rating": 4.7
        },
        {
          "id": 5,
          "name": "Amoxycillin and Potassium Clavunate Tab IP",
          "price": 95,
          "originalPrice": 120,
          "discount": "21% off",
          "category": "Antibiotics",
          "brand": "Abbott",
          "image": "https://via.placeholder.com/300x200.png?text=Amoxycillin+Clavunate",
          "prescriptionRequired": true,
          "rating": 4.6
        },
        {
          "id": 6,
          "name": "Tranexamic Acid 500mg and Mefenamic Acid 250mg",
          "price": 110,
          "originalPrice": 140,
          "discount": "21% off",
          "category": "Women's Health",
          "brand": "Biofield Pharma Pvt Ltd",
          "image": "https://via.placeholder.com/300x200.png?text=Tranexamic+Mefenamic",
          "prescriptionRequired": true,
          "rating": 4.3
        },
        {
          "id": 7,
          "name": "Trypsin 48mg Bromelain 90mg",
          "price": 180,
          "originalPrice": 220,
          "discount": "18% off",
          "category": "Anti-inflammatory",
          "brand": "Flexicare CD",
          "image": "https://via.placeholder.com/300x200.png?text=Trypsin+Bromelain",
          "prescriptionRequired": true,
          "rating": 4.1
        },
        {
          "id": 8,
          "name": "Natural Micronised Progesterone 200mg",
          "price": 250,
          "originalPrice": 300,
          "discount": "17% off",
          "category": "Women's Health",
          "brand": "Evapride Healthcare",
          "image": "https://via.placeholder.com/300x200.png?text=Progesterone+200mg",
          "prescriptionRequired": true,
          "rating": 4.8
        },
        {
          "id": 9,
          "name": "Azithromycin 250mg",
          "price": 140,
          "originalPrice": 170,
          "discount": "18% off",
          "category": "Antibiotics",
          "brand": "FDC Limited",
          "image": "https://via.placeholder.com/300x200.png?text=Azithromycin+250mg",
          "prescriptionRequired": true,
          "rating": 4.4
        },
        {
          "id": 10,
          "name": "Labetalol Hydrochloride 5mg",
          "price": 200,
          "originalPrice": 250,
          "discount": "20% off",
          "category": "Cardiovascular",
          "brand": "Unknown",
          "image": "https://via.placeholder.com/300x200.png?text=Labetalol+5mg",
          "prescriptionRequired": true,
          "rating": 4.5
        },
        {
          "id": 11,
          "name": "Ropivacaine Hydrochloride 7.5mg",
          "price": 450,
          "originalPrice": 500,
          "discount": "10% off",
          "category": "Anesthetics",
          "brand": "Unknown",
          "image": "https://via.placeholder.com/300x200.png?text=Ropivacaine+7.5mg",
          "prescriptionRequired": true,
          "rating": 4.2
        },
        {
          "id": 12,
          "name": "Lignocaine Hydrochloride 21.3mg",
          "price": 180,
          "originalPrice": 220,
          "discount": "18% off",
          "category": "Anesthetics",
          "brand": "Unknown",
          "image": "https://via.placeholder.com/300x200.png?text=Lignocaine+21.3mg",
          "prescriptionRequired": true,
          "rating": 4.3
        },
        {
          "id": 13,
          "name": "Propofol 1%w/v",
          "price": 650,
          "originalPrice": 750,
          "discount": "13% off",
          "category": "Anesthetics",
          "brand": "Unknown",
          "image": "https://via.placeholder.com/300x200.png?text=Propofol+1%",
          "prescriptionRequired": true,
          "rating": 4.6
        },
        {
          "id": 14,
          "name": "Vancomycin 1000mg",
          "price": 850,
          "originalPrice": 1000,
          "discount": "15% off",
          "category": "Antibiotics",
          "brand": "Unknown",
          "image": "https://via.placeholder.com/300x200.png?text=Vancomycin+1000mg",
          "prescriptionRequired": true,
          "rating": 4.9
        },
        {
          "id": 15,
          "name": "Ceftriaxone 1000mg Sulbactam 500mg",
          "price": 320,
          "originalPrice": 400,
          "discount": "20% off",
          "category": "Antibiotics",
          "brand": "Unknown",
          "image": "https://via.placeholder.com/300x200.png?text=Ceftriaxone+Sulbactam",
          "prescriptionRequired": true,
          "rating": 4.7
        }
      ];

      const grid = document.getElementById('productsGrid');

      // FILTER STATE
      let currentFilters = {
        category: 'all',
        minPrice: 0,
        maxPrice: 10000,
        sortBy: 'default',
        brand: 'all',
        discount: 'all'
      };

      // Product Card
      function createCard(p) {
        const div = document.createElement('div');
        div.className = 'bg-white rounded-lg shadow hover:shadow-xl transition p-4 relative';
        div.innerHTML = `
          <div class="absolute top-2 right-2 bg-red-600 text-white text-xs px-2 py-1 rounded-full z-10">Rx Required</div>
          <img src="${p.image}" class="w-full h-40 object-cover rounded mb-3">
          <h3 class="font-semibold text-sm line-clamp-2">${p.name}</h3>
          <p class="text-xs text-gray-600">${p.brand}</p>
          <p class="text-lg font-bold text-green-600 mt-2">₹${p.price}</p>
          ${p.originalPrice ? `<p class="text-xs"><span class="line-through text-gray-400">₹${p.originalPrice}</span> <span class="text-green-600">${p.discount}</span></p>` : ''}
          <button class="mt-3 w-full bg-red-600 hover:bg-red-700 text-white py-2 rounded-lg upload-pres-btn" data-product='${JSON.stringify(p).replace(/'/g, "&apos;")}'>
            Upload Prescription
          </button>
        `;
        return div;
      }

      // Show Products
      function displayProducts(list) {
        grid.innerHTML = '';
        if (list.length === 0) {
          grid.innerHTML = '<p class="col-span-full text-center py-16 text-gray-500 text-xl">No products found</p>';
        } else {
          list.forEach(p => grid.appendChild(createCard(p)));
        }
        document.getElementById('resultsCount').textContent = `Showing ${list.length} product${list.length !== 1 ? 's' : ''}`;
        document.getElementById('categoryTitle').textContent = currentFilters.category === 'all' ? 'All Products' : currentFilters.category;
      }

      // APPLY FILTER FUNCTION
      function applyFilters() {
        let filtered = products;

        // Category
        if (currentFilters.category !== 'all') {
          filtered = filtered.filter(p => p.category === currentFilters.category);
        }

        // Brand
        if (currentFilters.brand !== 'all') {
          filtered = filtered.filter(p => p.brand === currentFilters.brand);
        }

        // Discount
        if (currentFilters.discount !== 'all') {
          const minDiscount = parseInt(currentFilters.discount);
          filtered = filtered.filter(p => {
            if (!p.discount) return false;
            const discountPercent = parseInt(p.discount.replace(/[^0-9]/g, ''));
            return discountPercent >= minDiscount;
          });
        }

        // Price
        filtered = filtered.filter(p => p.price >= currentFilters.minPrice && p.price <= currentFilters.maxPrice);

        // Sort
        const sortedFiltered = [...filtered];
        switch(currentFilters.sortBy) {
          case 'price-low':
            sortedFiltered.sort((a, b) => a.price - b.price);
            break;
          case 'price-high':
            sortedFiltered.sort((a, b) => b.price - a.price);
            break;
          case 'rating':
            sortedFiltered.sort((a, b) => (b.rating || 0) - (a.rating || 0));
            break;
          case 'newest':
            sortedFiltered.sort((a, b) => b.id - a.id);
            break;
          default:
            // Featured - keep original order
            break;
        }

        displayProducts(sortedFiltered);
      }

      // === DESKTOP FILTERS ===
      document.getElementById('desktopFilterForm').addEventListener('submit', (e) => {
        e.preventDefault();
        applyFilters();
      });

      document.querySelectorAll('input[name="desktopCategory"]').forEach(radio => {
        radio.addEventListener('change', () => {
          currentFilters.category = radio.value;
        });
      });

      document.querySelectorAll('input[name="desktopBrand"]').forEach(radio => {
        radio.addEventListener('change', () => {
          currentFilters.brand = radio.value;
        });
      });

      document.querySelectorAll('input[name="desktopDiscount"]').forEach(radio => {
        radio.addEventListener('change', () => {
          currentFilters.discount = radio.value;
        });
      });

      // === MOBILE CATEGORY CHANGE ===
      document.querySelectorAll('input[name="mobileCategory"]').forEach(radio => {
        radio.addEventListener('change', () => {
          currentFilters.category = radio.value;
        });
      });

      // === MOBILE BRAND CHANGE ===
      document.querySelectorAll('input[name="mobileBrand"]').forEach(radio => {
        radio.addEventListener('change', () => {
          currentFilters.brand = radio.value;
        });
      });

      // === MOBILE DISCOUNT CHANGE ===
      document.querySelectorAll('input[name="mobileDiscount"]').forEach(radio => {
        radio.addEventListener('change', () => {
          currentFilters.discount = radio.value;
        });
      });

      // === PRICE SLIDERS ===
      function setupSlider(prefix) {
        const minSlider = document.getElementById(prefix + 'Min');
        const maxSlider = document.getElementById(prefix + 'Max');
        const fill = document.getElementById(prefix + 'Fill');
        const minVal = document.getElementById(prefix + 'MinVal');
        const maxVal = document.getElementById(prefix + 'MaxVal');

        function update() {
          let min = parseInt(minSlider.value);
          let max = parseInt(maxSlider.value);
          if (min > max) [min, max] = [max, min];

          currentFilters.minPrice = min;
          currentFilters.maxPrice = max;

          fill.style.left = (min / 10000) * 100 + '%';
          fill.style.width = ((max - min) / 10000) * 100 + '%';
          minVal.textContent = '₹' + min;
          maxVal.textContent = '₹' + max;
        }
        minSlider.oninput = maxSlider.oninput = update;
        update();
      }
      setupSlider('desktop');
      setupSlider('mobile');

      // === APPLY FILTERS BUTTON (Mobile) ===
      document.getElementById('applyMobileFilters').addEventListener('click', () => {
        applyFilters();
        document.getElementById('filterSheet').classList.add('translate-y-full');
        document.getElementById('mobileSheetBackdrop').classList.add('hidden');
      });

      // === CLEAR ALL ===
      document.getElementById('clearMobileFilters').addEventListener('click', () => {
        currentFilters = { category: 'all', minPrice: 0, maxPrice: 10000, sortBy: 'default', brand: 'all', discount: 'all' };
        document.querySelectorAll('input[value="all"]').forEach(el => el.checked = true);
        document.querySelectorAll('input[type="range"]').forEach(el => {
          el.value = el.id.includes('Min') ? 0 : 10000;
        });
        setupSlider('desktop');
        setupSlider('mobile');
        applyFilters();
      });

      // === DESKTOP SORT ===
      document.getElementById('sortSelect').addEventListener('change', (e) => {
        currentFilters.sortBy = e.target.value;
        applyFilters();
      });

      // === MOBILE SORT ===
      document.querySelectorAll('input[name="mobileSort"]').forEach(radio => {
        radio.addEventListener('change', () => {
          currentFilters.sortBy = radio.value;
        });
      });

      document.getElementById('applySortBtn').addEventListener('click', () => {
        applyFilters();
        document.getElementById('sortSheet').classList.add('translate-y-full');
        document.getElementById('mobileSheetBackdrop').classList.add('hidden');
      });

      // Mobile Sort Sheet Open/Close
      document.getElementById('openSortSheet').onclick = () => {
        document.getElementById('mobileSheetBackdrop').classList.remove('hidden');
        document.getElementById('sortSheet').classList.remove('translate-y-full');
      };
      
      document.getElementById('closeSortSheet').onclick = () => {
        document.getElementById('sortSheet').classList.add('translate-y-full');
        document.getElementById('mobileSheetBackdrop').classList.add('hidden');
      };

      // Mobile Sheet Open/Close
      document.getElementById('openFilterSheet').onclick = () => {
        document.getElementById('mobileSheetBackdrop').classList.remove('hidden');
        document.getElementById('filterSheet').classList.remove('translate-y-full');
      };
      
      document.getElementById('closeFilterSheet').onclick = () => {
        document.getElementById('mobileSheetBackdrop').classList.add('hidden');
        document.getElementById('filterSheet').classList.add('translate-y-full');
      };
      
      document.getElementById('mobileSheetBackdrop').onclick = () => {
        document.getElementById('mobileSheetBackdrop').classList.add('hidden');
        document.getElementById('filterSheet').classList.add('translate-y-full');
        document.getElementById('sortSheet').classList.add('translate-y-full');
      };

      // Upload Modal
      document.body.addEventListener('click', e => {
        if (e.target.classList.contains('upload-pres-btn')) {
          const product = JSON.parse(e.target.dataset.product.replace(/&apos;/g, "'"));
          document.getElementById('modalProductName').textContent = 'Upload Prescription for: ' + product.name;
          document.getElementById('uploadModal').classList.remove('hidden');
        }
      });

      // File Preview
      document.getElementById('prescriptionFile').addEventListener('change', (e) => {
        const file = e.target.files[0];
        if (file && file.type.startsWith('image/')) {
          const reader = new FileReader();
          reader.onload = (event) => {
            const preview = document.getElementById('prescriptionPreviewImg');
            preview.src = event.target.result;
            preview.classList.remove('hidden');
          };
          reader.readAsDataURL(file);
        }
      });

      // Submit Prescription
      document.getElementById('submitPrescription').addEventListener('click', () => {
        const file = document.getElementById('prescriptionFile').files[0];
        if (file) {
          alert('Prescription uploaded successfully! Our pharmacist will verify it shortly.');
          document.getElementById('uploadModal').classList.add('hidden');
          document.getElementById('prescriptionFile').value = '';
          document.getElementById('prescriptionPreviewImg').classList.add('hidden');
        } else {
          alert('Please select a prescription file first.');
        }
      });

      // Initial display
      displayProducts(products);
    });
  </script>
</body>
</html>